import{N as v,O as b,h as p,e as M,A,B,E as U,o as _,a as H,u as R,b as x}from"./entry.f5eceacf.js";let h;const D=new Uint8Array(16);function T(){if(!h&&(h=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!h))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return h(D)}const u=[];for(let e=0;e<256;++e)u.push((e+256).toString(16).slice(1));function V(e,t=0){return(u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]).toLowerCase()}const $=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),j={randomUUID:$};function E(e,t,r){if(j.randomUUID&&!t&&!e)return j.randomUUID();e=e||{};const n=e.random||(e.rng||T)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let o=0;o<16;++o)t[r+o]=n[o];return t}return V(n)}var C={exports:{}};(function(e,t){(function(r,n){n()})(v,function(){function r(s,i){return typeof i>"u"?i={autoBom:!1}:typeof i!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}function n(s,i,m){var a=new XMLHttpRequest;a.open("GET",s),a.responseType="blob",a.onload=function(){f(a.response,i,m)},a.onerror=function(){console.error("could not download file")},a.send()}function o(s){var i=new XMLHttpRequest;i.open("HEAD",s,!1);try{i.send()}catch{}return 200<=i.status&&299>=i.status}function l(s){try{s.dispatchEvent(new MouseEvent("click"))}catch{var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),s.dispatchEvent(i)}}var d=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof v=="object"&&v.global===v?v:void 0,w=d.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=d.saveAs||(typeof window!="object"||window!==d?function(){}:"download"in HTMLAnchorElement.prototype&&!w?function(s,i,m){var a=d.URL||d.webkitURL,c=document.createElement("a");i=i||s.name||"download",c.download=i,c.rel="noopener",typeof s=="string"?(c.href=s,c.origin===location.origin?l(c):o(c.href)?n(s,i,m):l(c,c.target="_blank")):(c.href=a.createObjectURL(s),setTimeout(function(){a.revokeObjectURL(c.href)},4e4),setTimeout(function(){l(c)},0))}:"msSaveOrOpenBlob"in navigator?function(s,i,m){if(i=i||s.name||"download",typeof s!="string")navigator.msSaveOrOpenBlob(r(s,m),i);else if(o(s))n(s,i,m);else{var a=document.createElement("a");a.href=s,a.target="_blank",setTimeout(function(){l(a)})}}:function(s,i,m,a){if(a=a||open("","_blank"),a&&(a.document.title=a.document.body.innerText="downloading..."),typeof s=="string")return n(s,i,m);var c=s.type==="application/octet-stream",O=/constructor/i.test(d.HTMLElement)||d.safari,S=/CriOS\/[\d]+/.test(navigator.userAgent);if((S||c&&O||w)&&typeof FileReader<"u"){var k=new FileReader;k.onloadend=function(){var y=k.result;y=S?y:y.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=y:location=y,a=null},k.readAsDataURL(s)}else{var L=d.URL||d.webkitURL,g=L.createObjectURL(s);a?a.location=g:location.href=g,a=null,setTimeout(function(){L.revokeObjectURL(g)},4e4)}});d.saveAs=f.saveAs=f,e.exports=f})})(C);const I=C.exports,{saveAs:N}=I,q=b("store",{state:()=>({menuOpened:!1,selectedDay:new Date().toLocaleDateString("en-CA"),weekObjective:"40:00",projects:[],entries:[]}),getters:{todaysEntries(){const{$moment:e}=p();return[...this.entries].sort((r,n)=>{const o=e(r.date+" "+r.start_time,"YYYY-M-D HH:mm");return e(n.date+" "+n.start_time,"YYYY-M-D HH:mm").isBefore(o)?1:-1}).filter(r=>e(this.selectedDay).isSame(r.date,"day"))},weekTotal(){const{$moment:e}=p(),t=Object.values(this.weekSummary).reduce((r,n)=>(r=e.duration(r).add(e.duration(n)),r),e.duration());return e.duration(t).format("HH:mm",{trim:!1})},weekRemaining(){const{$moment:e}=p();return e.duration(this.weekObjective).subtract(e.duration(this.weekTotal)).format("HH:mm",{trim:!1})},weekSummary(){const{$moment:e}=p(),t=e(this.selectedDay).startOf("week"),r=e(this.selectedDay).endOf("week");return this.entries.filter(n=>!n.is_creating).filter(n=>e(n.date).isBetween(t,r)).reduce((n,o)=>{const l=e(o.date).locale("en").format("dddd").toLowerCase();return n[l]=e.duration(n[l]).add(e.duration(o.duration)).format("HH:mm",{trim:!1}),n},{sunday:"00:00",monday:"00:00",tuesday:"00:00",wednesday:"00:00",thursday:"00:00",friday:"00:00",saturday:"00:00"})},weekSummaryColors(){return e=>{const{$moment:t}=p(),r=t.duration(e).asHours()===0,n=t.duration(e).asHours()>=t.duration(this.weekObjective).asHours()/5,o=t.duration(e).asHours()>=t.duration(this.weekObjective).asHours()/5-.5;return r?"text-gray-400 dark:text-gray-600":n?"text-green-500":o?"text-yellow-500":"text-red-500"}},weekSummaryByProjects(){const{$moment:e}=p(),t=e(this.selectedDay).startOf("week"),r=e(this.selectedDay).endOf("week"),n=[...this.entries].filter(o=>!o.is_creating).filter(o=>e(o.date).isBetween(t,r,"day","[]")).reduce((o,l)=>{const d=l.project;return o[d.name]?o[d.name]=e.duration(o[d.name]).add(l.duration).format("HH:mm"):o[d.name]=l.duration,o},{});return Object.entries(n).sort((o,l)=>e.duration(l[1]).asMilliseconds()-e.duration(o[1]).asMilliseconds())}},actions:{addEntry(e){this.entries.push({...JSON.parse(JSON.stringify(e)),id:E()})},updateEntry(e){const t=this.entries.findIndex(r=>r.id===e.id);this.entries[t]=JSON.parse(JSON.stringify(e))},deleteEntry(e){const t=p(),{t:r}=t.$i18n;if(confirm(r("\xCAtes vous certain de vouloir supprimer cette entr\xE9e ?"))){const n=this.entries.findIndex(o=>o.id===e.id);this.entries.splice(n,1)}},addProject(e){const t={id:E(),name:e.name};return this.projects.push(t),t},downloadAndReset(){const e=p(),{t}=e.$i18n,{$moment:r}=p(),n={entries:this.entries,weekSummary:this.weekSummary,weekTotal:this.weekTotal};var o=new Blob([JSON.stringify(n,null,2)],{type:"application/json"});N(o,`semaine-${r().week()}.json`),setTimeout(()=>{confirm(t("Voulez-vous r\xE9initialis\xE9 votre feuille de temps ? Ceci remettera \xE0 zero votre entr\xE9es de temps, mais conservera vos projets."))&&(this.entries=[])},100)}},persist:!0}),Y=["value","placeholder"],G=M({__name:"TimeInput",props:{type:{type:String,default:"datetime"},mask:{type:String,default:null},modelValue:{type:String,default:null},placeholder:{type:String,default:"HH:MM"}},emits:["update:modelValue"],setup(e,{emit:t}){const r=e,n=A(null),{$inputmask:o}=p(),l=B({get(){return r.modelValue},set(d){t("update:modelValue",d)}});return U(()=>{r.mask?new o({mask:r.mask,insertModeVisual:!1,placeholder:"HH:MM"}).mask(n.value):new o("datetime",{inputFormat:"HH:MM",insertModeVisual:!1}).mask(n.value)}),(d,w)=>(_(),H("input",{ref_key:"timeInput",ref:n,class:"form-control form-input form-input-bordered w-full",type:"text",value:R(l),placeholder:e.placeholder,onBlur:w[0]||(w[0]=f=>d.$emit("update:modelValue",f.target.value))},null,40,Y))}}),F={viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},J=x("g",{id:"edit_svg__Page-1","stroke-width":"1","fill-rule":"evenodd"},[x("g",{id:"edit_svg__edit",transform:"translate(0.000000, 0.475349)","fill-rule":"nonzero"},[x("path",{d:"M8,2.02465077 C8.55228475,2.02465077 9,2.47236602 9,3.02465077 C9,3.57693552 8.55228475,4.02465077 8,4.02465077 L3,4.02465077 C2.44771525,4.02465077 2,4.47236602 2,5.02465077 L2,16.0246508 C2,16.5769355 2.44771525,17.0246508 3,17.0246508 L14,17.0246508 C14.5522847,17.0246508 15,16.5769355 15,16.0246508 L15,11.0246508 C15,10.472366 15.4477153,10.0246508 16,10.0246508 C16.5522847,10.0246508 17,10.472366 17,11.0246508 L17,16.0246508 C17,17.681505 15.6568542,19.0246508 14,19.0246508 L3,19.0246508 C1.34314575,19.0246508 0,17.681505 0,16.0246508 L0,5.02465077 C0,3.36779652 1.34314575,2.02465077 3,2.02465077 L8,2.02465077 Z M13.8667118,0.91593898 C14.6199352,0.136069227 15.7353455,-0.176698812 16.7842338,0.0978475103 C17.8331221,0.372393832 18.6522569,1.19152871 18.9268033,2.24041701 C19.2013496,3.2893053 18.8885815,4.40471557 18.1211068,5.14575756 L9.53510678,13.7317576 C9.3475704,13.9192939 9.09321649,14.0246508 8.828,14.0246508 L6,14.0246508 C5.44771525,14.0246508 5,13.5769355 5,13.0246508 L5,10.1966508 C5,9.93143428 5.10535684,9.67708037 5.29289322,9.48954399 Z M16.2777955,2.03266541 C15.9281661,1.94114997 15.5563627,2.04540598 15.2931068,2.31775756 L7,10.6100248 L7,12.0240248 L8.413,12.0240248 L16.7192882,3.71936257 C16.9503607,3.49618526 17.0584106,3.17761718 17.0152947,2.86402362 L16.9919854,2.74685524 C16.9004699,2.39722581 16.627425,2.12418085 16.2777955,2.03266541 Z",id:"edit_svg__Combined-Shape"})])],-1),Z=[J];function z(e,t){return _(),H("svg",F,Z)}const X={render:z};export{X as I,G as _,q as u,E as v};
