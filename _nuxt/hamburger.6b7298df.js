import{c as v,a7 as ve,a8 as ye,U as he,a9 as ge,aa as A,ab as ne,r as b,ac as _e,ad as je,ae as Se,af as Ce,V as be,S as Ee,o as ae,ag as Me,ah as xe,a2 as He,ai as P,aj as I,ak as k,al as H,l as se,am as Le,an as W,ao as M,ap as te,aq as T,ar as ke,d as Oe,q as F,s as U,D as De,_ as $e,t as z}from"./entry.2ff4c6c7.js";function Ae(e){var s;const a=A(e);return(s=a==null?void 0:a.$el)!=null?s:a}const L=ve?window:void 0;function R(...e){let s,a,n,o;if(typeof e[0]=="string"||Array.isArray(e[0])?([a,n,o]=e,s=L):[s,a,n,o]=e,!s)return ye;Array.isArray(a)||(a=[a]),Array.isArray(n)||(n=[n]);const f=[],d=()=>{f.forEach(p=>p()),f.length=0},i=(p,h,S,g)=>(p.addEventListener(h,S,g),()=>p.removeEventListener(h,S,g)),c=he(()=>[Ae(s),A(o)],([p,h])=>{if(d(),!p)return;const S=ge(h)?{...h}:h;f.push(...a.flatMap(g=>n.map(_=>i(p,g,_,S))))},{immediate:!0,flush:"post"}),m=()=>{c(),d()};return ne(m),m}function Be(e){return typeof e=="function"?e:typeof e=="string"?s=>s.key===e:Array.isArray(e)?s=>e.includes(s.key):()=>!0}function tt(...e){let s,a,n={};e.length===3?(s=e[0],a=e[1],n=e[2]):e.length===2?typeof e[1]=="object"?(s=!0,a=e[0],n=e[1]):(s=e[0],a=e[1]):(s=!0,a=e[0]);const{target:o=L,eventName:f="keydown",passive:d=!1,dedupe:i=!1}=n,c=Be(s);return R(o,f,p=>{p.repeat&&A(i)||c(p)&&a(p)},d)}function Ve(){const e=b(!1);return Ee()&&ae(()=>{e.value=!0}),e}function Ne(e){const s=Ve();return v(()=>(s.value,!!e()))}function D(e,s={}){const{window:a=L}=s,n=Ne(()=>a&&"matchMedia"in a&&typeof a.matchMedia=="function");let o;const f=b(!1),d=m=>{f.value=m.matches},i=()=>{o&&("removeEventListener"in o?o.removeEventListener("change",d):o.removeListener(d))},c=_e(()=>{n.value&&(i(),o=a.matchMedia(A(e)),"addEventListener"in o?o.addEventListener("change",d):o.addListener(d),f.value=o.matches)});return ne(()=>{c(),i(),o=void 0}),f}const rt={sm:640,md:768,lg:1024,xl:1280,"2xl":1536};function nt(e,s={}){function a(i,c){let m=e[i];return c!=null&&(m=je(m,c)),typeof m=="number"&&(m=`${m}px`),m}const{window:n=L}=s;function o(i){return n?n.matchMedia(i).matches:!1}const f=i=>D(`(min-width: ${a(i)})`,s),d=Object.keys(e).reduce((i,c)=>(Object.defineProperty(i,c,{get:()=>f(c),enumerable:!0,configurable:!0}),i),{});return Object.assign(d,{greater(i){return D(`(min-width: ${a(i,.1)})`,s)},greaterOrEqual:f,smaller(i){return D(`(max-width: ${a(i,-.1)})`,s)},smallerOrEqual(i){return D(`(max-width: ${a(i)})`,s)},between(i,c){return D(`(min-width: ${a(i)}) and (max-width: ${a(c,-.1)})`,s)},isGreater(i){return o(`(min-width: ${a(i,.1)})`)},isGreaterOrEqual(i){return o(`(min-width: ${a(i)})`)},isSmaller(i){return o(`(max-width: ${a(i,-.1)})`)},isSmallerOrEqual(i){return o(`(max-width: ${a(i)})`)},isInBetween(i,c){return o(`(min-width: ${a(i)}) and (max-width: ${a(c,-.1)})`)},current(){const i=Object.keys(e).map(c=>[c,f(c)]);return v(()=>i.filter(([,c])=>c.value).map(([c])=>c))}})}const Y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},q="__vueuse_ssr_handlers__",Pe=Ie();function Ie(){return q in Y||(Y[q]=Y[q]||{}),Y[q]}function Te(e,s){return Pe[e]||s}function Ye(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const qe={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},re="vueuse-storage";function ze(e,s,a,n={}){var o;const{flush:f="pre",deep:d=!0,listenToStorageChanges:i=!0,writeDefaults:c=!0,mergeDefaults:m=!1,shallow:p,window:h=L,eventFilter:S,onError:g=l=>{console.error(l)}}=n,_=(p?Se:b)(s);if(!a)try{a=Te("getDefaultStorage",()=>{var l;return(l=L)==null?void 0:l.localStorage})()}catch(l){g(l)}if(!a)return _;const C=A(s),j=Ye(C),x=(o=n.serializer)!=null?o:qe[j],{pause:B,resume:V}=Ce(_,()=>N(_.value),{flush:f,deep:d,eventFilter:S});return h&&i&&(R(h,"storage",O),R(h,re,Z)),O(),_;function N(l){try{if(l==null)a.removeItem(e);else{const w=x.write(l),E=a.getItem(e);E!==w&&(a.setItem(e,w),h&&h.dispatchEvent(new CustomEvent(re,{detail:{key:e,oldValue:E,newValue:w,storageArea:a}})))}}catch(w){g(w)}}function K(l){const w=l?l.newValue:a.getItem(e);if(w==null)return c&&C!==null&&a.setItem(e,x.write(C)),C;if(!l&&m){const E=x.read(w);return typeof m=="function"?m(E,C):j==="object"&&!Array.isArray(E)?{...C,...E}:E}else return typeof w!="string"?w:x.read(w)}function Z(l){O(l.detail)}function O(l){if(!(l&&l.storageArea!==a)){if(l&&l.key==null){_.value=C;return}if(!(l&&l.key!==e)){B();try{(l==null?void 0:l.newValue)!==x.write(_.value)&&(_.value=K(l))}catch(w){g(w)}finally{l?be(V):V()}}}}}function $(e,s,a={}){const{window:n=L}=a;return ze(e,s,n==null?void 0:n.localStorage,a)}const at=Me("store",()=>{var X,ee;const e=xe(),s=He(),a=se(),{$moment:n}=a,{t:o}=a.$i18n,f={toFirestore(t){return delete t.id,{...t,date:n(t.date).startOf("day").toDate()}},fromFirestore(t,r){const u=Le.fromFirestore(t);return u.date=n(u.date.toDate()).format("YYYY-MM-DD"),u}},d=$("selectedDay",b(new Date().toLocaleDateString("en-CA"))),i=$("filter",b("daily")),c=$("selectedTabIndex",b(0)),m=$("sort",b("name")),p=$("weekObjective",b("40:00")),h=b(!1),S=v(()=>n(d.value).startOf("week").toDate()),g=v(()=>n(d.value).endOf("week").toDate()),_=P(I(H(e,"projects"),k("user","==",(X=s.value)==null?void 0:X.uid)),{ssrKey:"projects"}),C=P(I(H(e,"priorities"),k("user","==",(ee=s.value)==null?void 0:ee.uid)),{ssrKey:"priorities"}),j=P(v(()=>{var t;return I(H(e,"entries").withConverter(f),k("user","==",(t=s.value)==null?void 0:t.uid),k("date",">=",S.value),k("date","<=",g.value))}),{ssrKey:"entries"}),x=v(()=>[...j.value].sort((t,r)=>{const u=n(t.date+" "+t.start_time,"YYYY-M-D HH:mm");return n(r.date+" "+r.start_time,"YYYY-M-D HH:mm").isBefore(u)?1:-1}).filter(t=>n(d.value).isSame(t.date,"day"))),B=v(()=>{const t=Object.values(N.value).reduce((r,u)=>(r=n.duration(r).add(n.duration(u)),r),n.duration());return n.duration(t).format("HH:mm",{trim:!1})}),V=v(()=>n.duration(p.value).subtract(n.duration(B.value)).format("HH:mm",{trim:!1})),N=v(()=>j.value.filter(t=>!t.is_creating).filter(t=>n(t.date).isBetween(S.value,g.value,"day","[]")).reduce((t,r)=>{const u=n(r.date).locale("en").format("dddd").toLowerCase();return t[u]=n.duration(t[u]).add(n.duration(r.duration)).format("HH:mm",{trim:!1}),t},{sunday:"00:00",monday:"00:00",tuesday:"00:00",wednesday:"00:00",thursday:"00:00",friday:"00:00",saturday:"00:00"})),K=v(()=>{const t=[...j.value].filter(r=>!r.is_creating).reduce((r,u)=>{const y=u.project;return r[y.name]?r[y.name]=n.duration(r[y.name]).add(u.duration).format("HH:mm",{trim:!1}):r[y.name]=u.duration,r},{});return Object.entries(t).sort((r,u)=>n.duration(u[1]).asMilliseconds()-n.duration(r[1]).asMilliseconds())}),Z=v(()=>{const t=[...j.value].filter(r=>!r.is_creating).filter(r=>n(r.date).isSame(d.value)).reduce((r,u)=>{const y=u.project;return r[y.name]?r[y.name]=n.duration(r[y.name]).add(u.duration).format("HH:mm",{trim:!1}):r[y.name]=u.duration,r},{});return Object.entries(t).sort((r,u)=>n.duration(u[1]).asMilliseconds()-n.duration(r[1]).asMilliseconds())}),O=v(()=>{const t=_.value.map(r=>[r,G(r)]);return m.value==="name"?t.sort((r,u)=>r[0].name.localeCompare(u[0].name)):t}),l=v(()=>!!j.value.find(t=>t.is_live_clocking)),w=v(()=>!!j.value.find(t=>t.is_creating)),E=v(()=>!l.value&&!w.value),ie=t=>{const r=n.duration(t).asHours()===0,u=n.duration(t).asHours()>=n.duration(p.value).asHours()/5,y=n.duration(t).asHours()>=n.duration(p.value).asHours()/5-.5;return r?"text-gray-400 dark:text-gray-600":u?"text-green-500":y?"text-yellow-500":"text-red-500"},G=t=>j.value.filter(r=>{var u;return((u=r==null?void 0:r.project)==null?void 0:u.id)===t.id}).length;async function oe(t){var r;await W(H(e,"entries").withConverter(f),{...t,user:(r=s.value)==null?void 0:r.uid,project:M(e,"projects",t.project.id)})}async function ue(t){await te(M(e,"entries",t.id),{...t,project:M(e,"projects",t.project.id),date:n(t.date).startOf("day").toDate()})}async function le(t,r=!1){(r||confirm(o("Êtes vous certain de vouloir supprimer cette entrée ?")))&&await T(M(e,"entries",t.id))}async function ce(t){await te(M(e,"entries",t.id),{is_synced:!t.is_synced})}async function de(t){var u;return{id:(await W(H(e,"projects"),{name:t.name,user:(u=s.value)==null?void 0:u.uid})).id,name:t.name}}async function fe(t){if(confirm(o("Êtes vous certain de vouloir supprimer ce projet ?"))){const r=M(e,"projects",t.id),{promise:u}=await P(I(H(e,"entries"),k("project","==",r)),{once:!0,wait:!0,ssrKey:"projectEntries"}),y=ke(e),J=await u.value;J.length>0?confirm(o("Cela entrainera la supression de l'entrée liée, êtes-vous certain de vouloir continuer ? | Cela entrainera la supression des {n} entrées liées, êtes-vous certain de vouloir continuer ?",J.length))&&(J.forEach(we=>{y.delete(M(e,"entries",we.id))}),await y.commit(),await T(r)):await T(r)}}async function me(t){var r;await W(H(e,"priorities"),{name:t,completed:!1,user:(r=s.value)==null?void 0:r.uid})}async function Q(t,r=!1){(r||confirm(o("Êtes vous certain de vouloir supprimer cette priorité ?")))&&await T(M(e,"priorities",t.id))}function pe(){const t=C.value.filter(r=>r.completed);t.length!==0?confirm(o("Êtes vous certain de vouloir supprimer les priorités complétées ?"))&&t.forEach(r=>Q(r,!0)):alert(o("Aucune priorité complétée à supprimer"))}return{menuOpened:h,selectedDay:d,filter:i,selectedTabIndex:c,sort:m,weekObjective:p,projects:_,entries:j,priorities:C,weekStart:S,weekEnd:g,todaysEntries:x,weekTotal:B,weekRemaining:V,weekSummary:N,weekSummaryColors:ie,weeklySummaryByProjects:K,dailySummaryByProjects:Z,sortedProjects:O,projectEntriesTotal:G,isLiveClockingEntry:l,isCreatingEntry:w,canCreateEntry:E,addEntry:oe,updateEntry:ue,deleteEntry:le,toggleEntrySynced:ce,addProject:de,deleteProject:fe,addPriority:me,deletePriority:Q,deleteCompletedPriorities:pe}}),Ke=["value","placeholder"],Ze=Oe({__name:"TimeInput",props:{type:{default:"datetime"},mask:{},modelValue:{},placeholder:{default:"HH:MM"}},emits:["update:modelValue"],setup(e,{emit:s}){const a=e,n=b(null),{$inputmask:o}=se(),f=v({get(){return a.modelValue},set(d){s("update:modelValue",d)}});return ae(()=>{a.mask?new o({mask:a.mask,insertModeVisual:!1,placeholder:"HH:MM"}).mask(n.value):new o("datetime",{inputFormat:"HH:MM",insertModeVisual:!1}).mask(n.value)}),(d,i)=>(F(),U("input",{ref_key:"timeInput",ref:n,class:"form-control form-input-bordered form-input w-full",type:"text",value:De(f),placeholder:d.placeholder,onBlur:i[0]||(i[0]=c=>d.$emit("update:modelValue",c.target.value))},null,40,Ke))}}),st=$e(Ze,[["__file","TimeInput.vue"]]),Je={viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},We=z("g",{id:"edit_svg__Page-1","stroke-width":"1","fill-rule":"evenodd"},[z("g",{id:"edit_svg__edit",transform:"translate(0.000000, 0.475349)","fill-rule":"nonzero"},[z("path",{d:"M8,2.02465077 C8.55228475,2.02465077 9,2.47236602 9,3.02465077 C9,3.57693552 8.55228475,4.02465077 8,4.02465077 L3,4.02465077 C2.44771525,4.02465077 2,4.47236602 2,5.02465077 L2,16.0246508 C2,16.5769355 2.44771525,17.0246508 3,17.0246508 L14,17.0246508 C14.5522847,17.0246508 15,16.5769355 15,16.0246508 L15,11.0246508 C15,10.472366 15.4477153,10.0246508 16,10.0246508 C16.5522847,10.0246508 17,10.472366 17,11.0246508 L17,16.0246508 C17,17.681505 15.6568542,19.0246508 14,19.0246508 L3,19.0246508 C1.34314575,19.0246508 0,17.681505 0,16.0246508 L0,5.02465077 C0,3.36779652 1.34314575,2.02465077 3,2.02465077 L8,2.02465077 Z M13.8667118,0.91593898 C14.6199352,0.136069227 15.7353455,-0.176698812 16.7842338,0.0978475103 C17.8331221,0.372393832 18.6522569,1.19152871 18.9268033,2.24041701 C19.2013496,3.2893053 18.8885815,4.40471557 18.1211068,5.14575756 L9.53510678,13.7317576 C9.3475704,13.9192939 9.09321649,14.0246508 8.828,14.0246508 L6,14.0246508 C5.44771525,14.0246508 5,13.5769355 5,13.0246508 L5,10.1966508 C5,9.93143428 5.10535684,9.67708037 5.29289322,9.48954399 Z M16.2777955,2.03266541 C15.9281661,1.94114997 15.5563627,2.04540598 15.2931068,2.31775756 L7,10.6100248 L7,12.0240248 L8.413,12.0240248 L16.7192882,3.71936257 C16.9503607,3.49618526 17.0584106,3.17761718 17.0152947,2.86402362 L16.9919854,2.74685524 C16.9004699,2.39722581 16.627425,2.12418085 16.2777955,2.03266541 Z",id:"edit_svg__Combined-Shape"})])],-1),Re=[We];function Fe(e,s){return F(),U("svg",Je,Re)}const it={render:Fe},Ue={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 14 12"},Ge=z("path",{d:"M0 1a1 1 0 0 1 1-1h12a1 1 0 0 1 0 2H1a1 1 0 0 1-1-1Zm0 5a1 1 0 0 1 1-1h12a1 1 0 0 1 0 2H1a1 1 0 0 1-1-1Zm0 5a1 1 0 0 1 1-1h12a1 1 0 0 1 0 2H1a1 1 0 0 1-1-1Z","fill-rule":"nonzero"},null,-1),Qe=[Ge];function Xe(e,s){return F(),U("svg",Ue,Qe)}const ot={render:Xe};export{it as I,st as _,nt as a,ot as b,rt as c,tt as o,at as u};
